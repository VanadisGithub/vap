<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title>Welcome to Vap !</title>

    <script src="js/theater/theater.js"></script>
</head>

<style>
    /*html, body {*/
        /*height: 100%;*/
        /*width: 100%;*/
    /*}*/

    .body {
        background: #101010;
        background-size: 100%;
        /*background-color: #eee;*/
    }

    .myHome {
        width: 100%;
        height: 100%;
        background-color: #222222;
        padding-top: 50px;
    }

    .word-box {
        margin-left: 30%;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
    }

    .words {
         color: #ededed;
         font-size: 48px;
         /*font-family: 华文新魏;*/
         font-family: Cutive;
     }

    .words-new {
        color: #101010;
        font-size: 48px;
        /*font-family: 华文新魏;*/
        font-family: Cutive;
    }

    .talk-input {
        margin-left: 30%;
        max-width: 40%;
        position: absolute;
        top: 90%;
    }
</style>

<body class="body">

<nav th:replace="common/head :: head"></nav>
<div class="myHome">
    <div class="word-box">
        <div class="words">- <span id="First"></span></div>
        <div class="words" style="display: none">- <span id="Second"></span></div>
    </div>
    <input type="text" class="form-control talk-input" placeholder="也许你想说点什么..." style="display: none"/>
</div>

<script type="text/javascript">
    $(function () {
        var theater = new TheaterJS();
        theater
            .describe("First", 0.8, "#First")
            .describe("Second", 0.8, "#Second");
        theater
            .write("First:嗨！兄弟，江湖在哪里？", 400, showSeconde)
            .write("Second:我指给你看 . . .", 400)
            .write("Second:算了，你还是自己看吧", 400, function () {
                $('.talk-input').show();
                $('.talk-input').focus();
                $("#Second").parent().hide();
                $("body").css("background","#fff url(\"http://image.wufazhuce.com/Fov1FvsKC9JLt5po1DWL0IIL5K6G\") no-repeat left top");
                $(".words").addClass("words-new");
            })
            .write(function () {
                theater.play(false);//是否循环
            });

        function showSeconde() {
            $("#Second").parent().show();
        }

        document.onkeydown = function (e) {
            var ev = document.all ? window.event : e;
            if (ev.keyCode == 13) {
                $('.talk-input').show();
                $('.talk-input').focus();
                $("#Second").parent().hide();
                $("body").css("background","#fff url(\"/img/hero-bg.jpg\") no-repeat left top");
                $(".words").addClass("words-new");
            }
        }

        $(".talk-input").keypress(function (event) {
            if (event.keyCode == 13) {
                var paramData = {};
                paramData.info = $(this).val();
                paramData.key = 'be83ffb9321944b1affc3a179ef15eee';
                paramData.userId = 123;
                $.ajax({
                    type: "post",
                    url: "http://www.tuling123.com/openapi/api",
                    data: paramData,
                    dataType: "json",
                    success: function (resultDate) {
                        theater
                            .write("First:" + resultDate.text, 400)
                            .write(function () {
                                theater.play(false);//是否循环
                            });
                    },
                    error: function () {
                        errorMsg();
                    }
                })
            }
        });

    });
</script>

</body>
</html>