<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title>VAP</title>
</head>

<style>
    .body {
        background-color: #eee;
    }

    .article-div {
        width: 100%;
        border-radius: 3px;
        border: 1px solid #f7f7f7;
        box-shadow: 1px 1px 1px #d0d0d0;
        padding: 10px;
        margin-top: 10px;
        background-color: #ffffff;
    }

    .title {
        font-size: 20px;
        font-weight: bolder;
    }

</style>

<body class="body">


<div th:replace="common/head :: head"></div>

<div style="margin-top:70px;margin-left: 19.1%;margin-right: 19.1%">
    <form class="form-inline">
        <input id="url" class="form-control" type="text">
        <span id="add-btn" class="btn btn-default" style="margin-left: 20px;margin-right: 20px">添加</span>
        <span id="test-btn" class="btn btn-default" style="margin-left: 20px;margin-right: 20px">测试</span>
        <span id="hide-btn" class="btn btn-default" style="margin-left: 20px;margin-right: 20px">隐藏</span>
    </form>
    <div class="box" style="position:relative;">
        <div th:each="article : ${articles}" class="article-div">
            <div th:text="${article.title}" class="title">标题</div>
            <div th:text="${article.createTsStr}">时间</div>
        </div>
    </div>
</div>

</body>
<script type="text/javascript">

    $(function () {
        $(".article-div").draggable();
        $(".article-div").unbind("click").click(function () {
            changeZindex(this);
        });
        $(".article-div").unbind("dblclick").dblclick(function () {
            runEffect(this);
        });
        $("#add-btn").unbind("click").click(function () {
            addBookmark();
        });
        $("#hide-btn").unbind("click").click(function () {
            $(".icon-div").slideUp();
        });
        $("#test-btn").unbind("click").click(function () {

        });
    });

    function addBookmark() {
        var paramData = {};
        paramData.url = $('#url').val();
        $.ajax({
            type: "post",
            url: "/collection/addBookmark",
            data: paramData,
            dataType: "json",
            success: function (resultDate) {
                location.reload();
            },
            error: function () {
                alert('访问出错~！')
            }
        })
    }

    function changeZindex(obj) {
        var divs = $(".icon-div");
        var maxNum = 0;
        for (var i = 0; i < divs.length; i++) {
            var tempNum = divs[i].style.zIndex;
            tempNum = (tempNum) ? parseInt(tempNum) : 0;
            if (tempNum > maxNum) maxNum = tempNum;
        }
        obj.style.zIndex = maxNum + 1;
    }

    function runEffect(obj) {
        // 从中获取特效类型
        var selectedEffect = 'fold';

        // 大多数的特效类型默认不需要传递选项
        var options = {};
        // 一些特效带有必需的参数
        if (selectedEffect === "scale") {
            options = {percent: 0};
        } else if (selectedEffect === "size") {
            options = {to: {width: 200, height: 60}};
        }

        // 运行特效
        $(".icon-div").toggle(selectedEffect, options, 500);

    }
</script>
</html>